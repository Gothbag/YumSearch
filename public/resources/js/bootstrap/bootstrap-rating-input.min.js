!function(a){var b="rating-clear",c="."+b,d="hidden",e=function(a){return"[data-value"+(a?"="+a:"")+"]"},f=function(a,b,c){var d=c["active-icon"],e=c["inactive-icon"];a.removeClass(b?e:d).addClass(b?d:e)},g=function(c,d){for(var e=d.min,f=d.max,g=d.clearable,h=a('<div class="rating-input"></div>'),i=e;f>=i;i++)h.append('<i class="'+d["icon-lib"]+'" data-value="'+i+'"></i>');return g&&h.append("&nbsp;").append('<a class="'+b+'"><i class="'+d["icon-lib"]+" "+d["clearable-icon"]+'"/>'+g+"</a>"),h},h=function(a){var b={};for(option in i)b[option]=a.data(option);return b},i={min:1,max:5,"empty-value":0,"icon-lib":"glyphicon","active-icon":"glyphicon-star","inactive-icon":"glyphicon-star-empty",clearable:"","clearable-icon":"glyphicon-remove"},j=function(b,c){var e=this.$input=a(b),f=this.options=a.extend({},i,h(e),c),j=this.$el=g(e,f);e.addClass(d).before(j),this.highlight(e.val())};j.VERSION="0.3.0",j.DEFAULTS=i,j.prototype={clear:function(){this.setValue(this.options["empty-value"])},setValue:function(a){this.highlight(a),this.updateInput(a)},highlight:function(a,b){var g=this.options,h=this.$el;if(a>=this.options.min&&a<=this.options.max){var i=h.find(e(a));f(i.prevAll("i").andSelf(),!0,g),f(i.nextAll("i"),!1,g)}else f(h.find(e()),!1,g);b||(a&&a!=this.options["empty-value"]?h.find(c).removeClass(d):h.find(c).addClass(d))},updateInput:function(a){var b=this.$input;b.val()!=a&&b.val(a).change()}};var k=a.fn.rating=function(b){return this.each(function(){var d=a(this),f="rating",g=d.data(f),h="object"==typeof b&&b;g||(g=new j(d,h),g.$el.on("mouseenter",e(),function(){g.highlight(a(this).data("value"),!0)}).on("mouseleave",e(),function(){g.highlight(d.val(),!0)}).on("click",e(),function(){g.setValue(a(this).data("value"))}).on("click",c,function(){g.clear()}),d.data(f,g)),"clear"===b?g.clear():"setValue"===b&&g.setValue(arguments[1])})};k.Constructor=j,a(function(){a("input.rating[type=number]").each(function(){a(this).rating()})})}(jQuery);
